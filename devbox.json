{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.13.7/.schema/devbox.schema.json",
  "packages": [
    "nodejs_22@latest",
    "corepack@latest",
    "coreutils@latest",
    "act@latest",
    "colima@latest",
    "docker@latest",
    "toml-cli@latest"
  ],
  "env": {
    "DOCKER_HOST": "unix://$HOME/.colima/docker.sock"
  },
  "shell": {
    "init_hook": [
      "export PATH=$(pwd)/node_modules/.bin:$PATH",
      "test -z \"$CI\" && (colima status || devbox services up -b)"
    ],
    "scripts": {
      "install": ["pnpm install"],
      "supabase": ["supabase status || supabase start"],
      "inngest": [
        "docker ps -q -f ancestor=inngest/inngest || docker run -d --network supabase_network_$(toml get --raw supabase/config.toml project_id) -p 8288:8288 inngest/inngest inngest dev"
      ],
      "build": ["pnpm types", "pnpm format", "pnpm lint", "pnpm build"],
      "test": ["pnpm test"]
    }
  },
  "env_from": "jetpack-cloud"
}
